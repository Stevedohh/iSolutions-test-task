<ng-container *ngIf="planets$ | withLoading | async as planets">
  <ng-template [ngIf]="planets.value?.length">
    <table mat-table [dataSource]="getPlanetsValue(planets)" class="mat-elevation-z8">
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let element">
          {{element.name}}
        </td>
      </ng-container>
      <ng-container matColumnDef="population">
        <th mat-header-cell *matHeaderCellDef>Population</th>
        <td mat-cell *matCellDef="let element">
          {{element.population}}
        </td>
      </ng-container>
      <ng-container matColumnDef="diameter">
        <th mat-header-cell *matHeaderCellDef>Diameter</th>
        <td mat-cell *matCellDef="let element">
          {{element.diameter}}
        </td>
      </ng-container>
      <ng-container matColumnDef="climate">
        <th mat-header-cell *matHeaderCellDef>Climate</th>
        <td mat-cell *matCellDef="let element">
          {{element.climate}}
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedPlanetColumns"></tr>
      <tr
        mat-row
        class="planets-table-row"
        (click)="onPlanetRowClick(row)"
        *matRowDef="let row; columns: displayedPlanetColumns;"
      ></tr>
    </table>
  </ng-template>
  <ng-template [ngIf]="planets.error">Error {{ planets.error }}</ng-template>
  <ng-template [ngIf]="planets.loading">Loading...</ng-template>
</ng-container>

